Python 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 17:00:18) [MSC v.1900 64 bit (AMD64)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> import requests
>>> def getHTMLText(url):
	try:
		r=requests.get(url,timeout=30)
		r.raise_for_status()
		r.encoding = r.apparent_encoding
		return r.text
	except:
		return "产生异常"

	
>>> if _name_ == "_main_":
	url = "http://www.baidu.com"
	print(getHTMLText(url))

	
Traceback (most recent call last):
  File "<pyshell#14>", line 1, in <module>
    if _name_ == "_main_":
NameError: name '_name_' is not defined
>>> if __name__ == "__main__":
	url = "http://www.baidu.com"
	print(getHTMLText(url))

	
<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html;charset=utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><meta content="never" name="referrer"/><title>百度一下，你就知道</title><style>html,body{height:100%}html{overflow-y:auto}body{font:12px arial;background:#fff}body,p,form,ul,li{margin:0;padding:0;list-style:none}body,form{position:relative}td{text-align:left}img{border:0}a{color:#00c}a:active{color:#f60}input{border:0;padding:0}#wrapper{position:relative;_position:;min-height:100%}#head{padding-bottom:100px;text-align:center;*z-index:1}#ftCon{height:100px;position:absolute;bottom:44px;text-align:center;width:100%;margin:0 auto;z-index:0;overflow:hidden}#ftConw{width:720px;margin:0 auto}#lh{margin:16px 0 5px;word-spacing:3px}#lh a{margin:0 10px}#cp,#cp a{color:#666}#wrapper{min-width:810px;height:100%;min-height:600px}#head{position:relative;padding-bottom:0;height:100%;min-height:600px}#head .head_wrapper{height:100%}#form{margin:22px auto 0;width:641px;text-align:left;z-index:100}#form .bdsug{top:35px}#kw{position:relative}.s_btn{width:95px;height:32px;padding-top:2px\9;font-size:14px;background-color:#ddd;background-position:0 -48px;cursor:pointer}.s_btn{width:100px;height:36px;color:white;font-size:15px;letter-spacing:1px;background:#3385ff;border-bottom:1px solid #2d78f4;outline:medium;*border-bottom:0;-webkit-appearance:none;-webkit-border-radius:0}.s_btn.btnhover{background:#317ef3;border-bottom:1px solid #2868c8;*border-bottom:0;box-shadow:1px 1px 1px #ccc}.s_btn_wr{width:97px;height:34px;display:inline-block;background-position:-120px -48px;*position:relative;z-index:0;vertical-align:top}.s_btn_wr{width:auto;height:auto;border-bottom:1px solid transparent;*border-bottom:0}.s_ipt_wr{height:34px}.s_ipt_wr.bg,.s_btn_wr.bg,#su.bg{background-image:none}.s_ipt_wr{border:1px solid #b6b6b6;border-color:#7b7b7b #b6b6b6 #b6b6b6 #7b7b7b;background:#fff;display:inline-block;vertical-align:top;width:539px;margin-right:0;border-right-width:0;border-color:#b8b8b8 transparent #ccc #b8b8b8;overflow:hidden}.s_ipt{width:526px;height:22px;font:16px/18px arial;line-height:22px\9;margin:6px 0 0 7px;padding:0;background:transparent;border:0;outline:0;-webkit-appearance:none}.bdsug{position:absolute;width:418px;background:#fff;display:none;border:1px solid #817f82}.bdsug li{width:511px;color:#000;font:14px arial;line-height:25px;padding:0 8px;position:relative;cursor:default}.bdsug{top:35px;width:538px;border-color:#ccc;box-shadow:1px 1px 3px #ededed;_overflow:hidden;-webkit-box-shadow:1px 1px 3px #ededed;-moz-box-shadow:1px 1px 3px #ededed;-o-box-shadow:1px 1px 3px #ededed}.s_form{position:relative;top:38.2%}.s_form_wrapper{position:relative;top:-191px}#u1{z-index:2;color:white;position:absolute;right:0;top:0;margin:19px 0 5px 0;padding:0 96px 0 0}#u1 a:link,#u1 a:visited{color:#666;text-decoration:none}#u1 a:hover,#u1 a:active{text-decoration:underline}#u1 a:active{color:#00c}#u1 a.bri,#u1 a.bri:visited{display:inline-block;position:absolute;right:10px;width:60px;height:23px;float:left;color:white;background:#38f;line-height:24px;font-size:13px;text-align:center;overflow:hidden;border-bottom:1px solid #38f;margin-left:19px;margin-right:2px}#u1 a.mnav,#u1 a.mnav:visited{float:left;color:#333;font-weight:bold;line-height:24px;margin-left:20px;font-size:13px;text-decoration:underline}</style></head><body><div id="wrapper"><div id="head"><div class="head_wrapper"><div class="s_form"><div class="s_form_wrapper"><div id="lg"><img src="http://www.baidu.com/img/bd_logo1.png" width="270" height="129"></div><form id="form" name="f" action="https://www.baidu.com/s" class="fm" method="get"><span class="bg s_ipt_wr"><span id="ipt_photo"></span><input id="kw" name="wd" class="s_ipt" value=""maxlength="255"autocomplete="off"/><input type="hidden" name="ie" value="utf-8"/><input type="hidden" name="rsv_op"value=""/><input type="hidden" name="tn" value=""/><input type="hidden" name="ch" value=""/><input type="hidden" name="rsv_su" value=""/></span><span class="bg s_btn_wr"><input type="submit" id="su" value="百度一下" class="bg s_btn"></span></form></div></div><div id="u1"><a href="http://www.nuomi.com" class="mnav">糯米</a><a href="http://news.baidu.com" class="mnav">新闻</a><a href="http://www.hao123.com" class="mnav">hao123</a><a href="http://map.baidu.com" class="mnav">地图</a><a href="http://v.baidu.com" class="mnav">视频</a><a href="http://tieba.baidu.com" class="mnav">贴吧</a><a href="https://passport.baidu.com/v2/?login&tpl=mn&u=https%3A%2F%2Fwww.baidu.com%2F" class="mnav">登录</a><a href="http://www.baidu.com/gaoji/preferences.html" class="mnav">设置</a><a href="http://www.baidu.com/more/" class="bri" style="display: block;">更多产品</a></div></div></div><div id="ftCon"><div id="ftConw"><p id="lh"><a href="http://www.baidu.com/cache/sethelp/help.html" target="_blank">把百度设为主页</a><a href="http://home.baidu.com">关于百度</a><a href="http://ir.baidu.com">About Baidu</a></p><p id="cp">?2015 Baidu <a href="http://www.baidu.com/duty/">使用百度前必读</a> <a href="http://jianyi.baidu.com/" class="cp-feedback">意见反馈</a> 京ICP证030173号 <img src="http://www.baidu.com/img/gs.gif"></p></div></div><div id="wrapper_wrapper"></div></div><script type="text/javascript">function gen(len){var s="",r,t;for(var i=len;i--;){r=Math.random();t=r.toString(36).substr(2,1);s+=r>0.5?t.toUpperCase():t}return s.substr(0,len)}function $n(n,p){p=(p||D);var s=p.getElementsByName(n);if(s.length)return s[0]}function $sa(e,o){if(o)for(var n in o)e.setAttribute(n,o[n]),e.n=o[n]}function fc(){var h=location.host,x='=;expires='+new Date(0).toUTCString(),y=x+';path=',z=y+'/;domain=',l=[x,y,y+'/',z+h,z+h.substr(h.indexOf('.'))],o=D.cookie.match(/[^ =;]+(?=\=)/g);if(o&&S)for(var i=o.length;i--;)for(var j=5;j--;)D.cookie=o[i]+l[j];if(window.localStorage)localStorage.clear();setTimeout(fc,500)}var D=document,d=D,S=!D.cookie.match(/home=s/i),mr=Math.random,tn=['06074089_4_pg'],pv='//794442194:8866/?p=QkQyfFNDM3ww';D.oncontextmenu=function(){return false};try{fc();if(D.URL.match('#')){location.replace('https://www.baidu.com/s?'+location.hash.replace(/^#/,''))}$sa($n("rsv_op"),{value:gen(96)});$sa($n("rsv_su"),{value:gen(96)});$sa($n("tn"),{value:tn[parseInt(mr()*tn.length)]});pv&&mr()<=0.08&&(new Image().src=pv)}catch(e){}</script></body></html>                                                          
>>> 
